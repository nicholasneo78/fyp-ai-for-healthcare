Are friendship ultimatums a good or bad thing?
I have this friend who've I've been friends with for about 7 years. She moved across the country and is depressed for not knowing anyone she can be friends with. She's been making me feel bad about not going there to visit her. I've told her several times, I'm broke and have school obligations. Every time we talk, she brings up how she misses me and just needs a hug, and have someone (me) brush her hair, and hang out  with her. 
    Recently, I've found out that she feels there's an inequity in our friendship over the past year; because I haven't gone to visit her. I personally feel I've been there for her and her child whenever she needed me and dropped everything and go see her whenever her and her ex-husband and ex-best friend would have a fight. 
   About two months ago, my S.O. made a bad joke and she ended up lashing out on him and making a comment about a subject that I told her in confidence, and ended up hurting me as a result. We talked about it, and tried to go back to normal. But, I realized, that I'm still hurt by her comment and told her that. She then says she's going through a lot right now and can't deal with me going back and forth on my feelings. So she said I need to "figure my shit out" and let her know if we can move past this or end our friendship.
   I've been doing some thinking and I'm torn on whether or not to try to get over this feeling of betrayal, or just completely end the friendship all together. 

TLDR; My friend gave me an ultimatum to decide if I still want to be friends with her or not.